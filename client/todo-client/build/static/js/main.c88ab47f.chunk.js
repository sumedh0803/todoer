(this["webpackJsonptodo-client"]=this["webpackJsonptodo-client"]||[]).push([[0],{141:function(e,t,n){},142:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),s=n.n(o),i=(n(141),n(16)),c=n(17),l=n(19),d=n(18),u=(n(142),n(185)),h=n(183),p=n(76),j=n(181),m=n(53),b=n(13),g=n(11),f=n.n(g),x=n(27),O=n(28),y=n(175),v=n(187),T=n(42),k=n(2),D=r.a.createContext(),C=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(k.jsx)(D.Consumer,{children:this.props.children})}}]),n}(a.Component),S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).signup=function(t,n,a){e.setState({signupInProgress:!0},(function(){fetch("/auth/signup",{method:"post",body:JSON.stringify({username:n,password:a,name:t}),headers:{"Content-Type":"application/json"}}).then(function(){var t=Object(x.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:a=t.sent,200==n.status?e.setState({isSignedIn:!0,user:a,signupInProgress:!1},(function(){(new O.a).set("user",a)})):e.setState({signUpError:a.message,isSignedIn:!1,user:null,signupInProgress:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},e.signout=function(){var t=new O.a;t.remove("accessToken"),t.remove("refreshToken"),e.setState({isSignedIn:!1,user:null})},e.signin=function(t,n){e.setState({signinInProgress:!0},(function(){fetch("/auth/signin",{method:"post",body:JSON.stringify({username:t,password:n}),headers:{"Content-Type":"application/json"}}).then(function(){var t=Object(x.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:a=t.sent,200==n.status?e.setState({isSignedIn:!0,user:a,signinInProgress:!1},(function(){(new O.a).set("user",a)})):e.setState({signInError:a.message,isSignedIn:!1,user:null,signinInProgress:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},e.refresh=Object(x.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,t.next=3,fetch("/auth/refresh",{method:"post",headers:{"Content-Type":"application/json",refreshToken:(new O.a).get("refreshToken")}}).then(function(){var t=Object(x.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!=a.status){t.next=5;break}console.log("New token received. Fetching data"),n=200,t.next=10;break;case 5:return e.signout(),t.next=8,a.json();case 8:throw r=t.sent,new Error(r.message);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e),n=400}));case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),e.state={user:null,signUpError:"",signInError:"",isSignedIn:!1,signinInProgress:!1,signupInProgress:!1,signup:e.signup,signout:e.signout,signin:e.signin,refresh:e.refresh},e.signup=e.signup.bind(Object(T.a)(e)),e.signin=e.signin.bind(Object(T.a)(e)),e.signout=e.signout.bind(Object(T.a)(e)),e.refresh=e.refresh.bind(Object(T.a)(e)),e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=new O.a,t=e.get("accessToken"),n=e.get("user");this.setState({isSignedIn:null!=t,user:n})}},{key:"render",value:function(){return Object(k.jsx)(D.Provider,{value:this.state,children:this.props.children})}}]),n}(a.Component),w=D,F=n(50),H=n(119),P=n(186),I=n(151),M=n(190),E=n(178),N=n(22),B=n(179),W=n(191),U=n(88),A=n.n(U),_=n(89),J=n.n(_),L=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).selectColor=function(e){e=e===a.state.selected?"#FFFFFF":e,a.setState({selected:e},(function(){a.props.selectColor(e)}))},a.state={colors:a.props.colors?a.props.colors:["#F48FB1","#CE93D8","#80CBC4","#FFCC80","#FFAB91"],selected:a.props.selected},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return this.props.display?Object(k.jsx)(H.a,{elevation:0,style:{transform:"translateX(12px)",marginBottom:"12px",maxWidth:"175px",padding:"4px"},children:Object(k.jsx)(y.a,{container:!0,spacing:1,children:this.state.colors.map((function(t){return t===e.state.selected?Object(k.jsx)(y.a,{item:!0,children:Object(k.jsx)(H.a,{variant:"outlined",style:{height:"25px",width:"25px",backgroundColor:t,display:"inline",float:"left",cursor:"pointer",border:"2px solid black"},onClick:function(){return e.selectColor(t)}})},t):Object(k.jsx)(y.a,{item:!0,children:Object(k.jsx)(H.a,{variant:"outlined",style:{height:"25px",width:"25px",backgroundColor:t,display:"inline",float:"left",cursor:"pointer"},onClick:function(){return e.selectColor(t)}})},t)}))})}):null}}]),n}(a.Component),X=n(91),z=n(188),Y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).changeHandler=function(t){e.setState(Object(F.a)({},t.target.name,t.target.value))},e.dateChangeHandler=function(t){e.setState((function(e){return{dueDate:t,dueTime:e.dueTime?e.dueTime:new Date(t.setHours(8,0,0,0))}}))},e.timeChangeHandler=function(t){e.setState((function(e){return{dueTime:t,dueDate:e.dueDate?e.dueDate:new Date(Date.now())}}))},e.submitHandler=function(t){t.preventDefault();var n=e.state;e.setState({title:"",body:"",todoColor:"#FFFFFF",colorPickerState:!1,dateTimePickerState:!1,dueDate:null,dueTime:null},(function(){e.props.submitHandler(n)}))},e.toggleColorPicker=function(){e.setState((function(e){return{colorPickerState:!e.colorPickerState,dateTimePickerState:!1}}))},e.toggleDateTimePicker=function(){e.setState((function(e){return{dateTimePickerState:!e.dateTimePickerState,colorPickerState:!1}}))},e.selectColor=function(t){e.setState({todoColor:t})},e.getTime=function(){var t=(e.state.dueTime.getHours()%12<10?"0":"")+e.state.dueTime.getHours()%12,n=(e.state.dueTime.getMinutes()<10?"0":"")+e.state.dueTime.getMinutes(),a=e.state.dueTime.getHours()>=12?"PM":"AM";return"".concat(t,":").concat(n," ").concat(a)},e.clearDue=function(){e.setState({dueDate:null,dueTime:null})},e.state={title:"",body:"",colorPickerState:!1,dateTimePickerState:!1,todoColor:"#FFFFFF",dueDate:null,dueTime:null,completed:!1},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(k.jsx)(y.a,{item:!0,container:!0,sm:12,children:Object(k.jsxs)(H.a,{style:{padding:"16px",backgroundColor:this.state.todoColor},elevation:3,children:[Object(k.jsx)(p.a,{variant:"h4",children:"I need to..."}),this.props.newTodoError&&Object(k.jsx)(z.a,{severity:"error",variant:"outlined",style:{margin:"12px 0px"},children:this.props.newTodoError}),Object(k.jsxs)("form",{method:"post",action:"/todos",onSubmit:function(t){return e.submitHandler(t)},children:[Object(k.jsx)(P.a,{name:"title",label:"Title",variant:"outlined",fullWidth:!0,style:{margin:"4px 0px"},value:this.state.title,className:"customInput",onChange:function(t){return e.changeHandler(t)}}),Object(k.jsx)(P.a,{name:"body",label:"Description",variant:"outlined",fullWidth:!0,multiline:!0,className:"customInput",style:{margin:"4px 0px"},value:this.state.body,onChange:function(t){return e.changeHandler(t)}}),Object(k.jsxs)(H.a,{elevation:3,style:{margin:"4px 0px"},children:[Object(k.jsx)(I.a,{children:Object(k.jsx)(M.a,{title:"Set Reminder","aria-label":"set reminder",children:Object(k.jsx)(A.a,{onClick:function(){return e.toggleDateTimePicker()}})})}),Object(k.jsx)(I.a,{children:Object(k.jsx)(M.a,{title:"Change Color","aria-label":"change color",children:Object(k.jsx)(J.a,{onClick:function(){return e.toggleColorPicker()}})})}),this.state.dueDate&&Object(k.jsxs)(p.a,{variant:"body2",style:{margin:"4px 12px",backgroundColor:"#FFF",marginBottom:"12px"},children:["Due on ","".concat(this.state.dueDate.getMonth()+1,"/").concat(this.state.dueDate.getDate(),"/").concat(this.state.dueDate.getFullYear()," at ").concat(this.getTime())]}),Object(k.jsxs)(E.a,{in:this.state.dateTimePickerState||this.state.colorPickerState,timeout:"auto",unmountOnExit:!0,children:[this.state.dateTimePickerState?Object(k.jsx)(N.a,{utils:X.a,children:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(B.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",style:{backgroundColor:"#FFF",transform:"translateX(12px)",marginBottom:"12px"},id:"dueDate",label:"Due Date",value:this.state.dueDate,name:"dueDate",onChange:function(t){return e.dateChangeHandler(t)},KeyboardButtonProps:{"aria-label":"change date"}}),Object(k.jsx)(W.a,{style:{margin:"4px 0px",backgroundColor:"#FFF",transform:"translateX(12px)",marginBottom:"12px"},id:"dueTime",label:"Due Time",value:this.state.dueTime,onChange:function(t){return e.timeChangeHandler(t)},KeyboardButtonProps:{"aria-label":"change time"}}),this.state.dueDate&&Object(k.jsx)(j.a,{color:"secondary",style:{backgroundColor:"#FFF",transform:"translateX(12px)",marginBottom:"12px"},onClick:function(){return e.clearDue()},children:"Clear Due date and time"})]})}):null,Object(k.jsx)(L,{display:this.state.colorPickerState,selectColor:this.selectColor,selected:this.state.todocolor})]})]}),Object(k.jsx)(y.a,{container:!0,justify:"flex-end",children:Object(k.jsx)(j.a,{variant:"contained",color:"primary",type:"submit",style:{margin:"4px 0px"},children:"add new to-do"})})]})]})})}}]),n}(a.Component),K=n(116),q=n(189),R=n(90),G=n.n(R),Q=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getDueDate=function(){return"".concat(a.state.finalDate.getMonth()+1,"/").concat(a.state.finalDate.getDate(),"/").concat(a.state.finalDate.getFullYear())},a.getDueTime=function(){var e=(a.state.finalDate.getHours()%12<10?"0":"")+a.state.finalDate.getHours()%12,t=(a.state.finalDate.getMinutes()<10?"0":"")+a.state.finalDate.getMinutes(),n=a.state.finalDate.getHours()>=12?"PM":"AM";return"".concat(e,":").concat(t," ").concat(n)},a.state={id:null,title:null,body:null,todoColor:null,dueDate:null,dueTime:null,finalDate:null,isDue:!1,completed:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e,t=this.props.data.dueDate?new Date(this.props.data.dueDate):null,n=this.props.data.dueTime?new Date(this.props.data.dueTime):null;e=null!=t&&null!=n?new Date(t.getFullYear(),t.getMonth(),t.getDate(),n.getHours(),n.getMinutes(),n.getSeconds()):null,this.setState({id:this.props.data._id,title:this.props.data.title,body:this.props.data.body,todoColor:this.props.data.todoColor,dueDate:this.props.data.dueDate?new Date(this.props.data.dueDate):null,dueTime:this.props.data.dueTime?new Date(this.props.data.dueTime):null,finalDate:e,isDue:!!e&&Date.now()>e,completed:this.props.data.completed})}},{key:"componentDidUpdate",value:function(e){var t,n=this.props.data.dueDate?new Date(this.props.data.dueDate):null,a=this.props.data.dueTime?new Date(this.props.data.dueTime):null;t=null!=n&&null!=a?new Date(n.getFullYear(),n.getMonth(),n.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()):null,this.props.data.title===e.data.title&&this.props.data.body===e.data.body&&this.props.data.id===e.data.id&&this.props.data.todoColor===e.data.todoColor&&this.props.data.completed===e.data.completed&&this.props.data.dueDate===e.data.dueDate&&this.props.data.dueTime===e.data.dueTime||this.setState({id:this.props.data._id,title:this.props.data.title,body:this.props.data.body,todoColor:this.props.data.todoColor,dueDate:new Date(this.props.data.dueDate),dueTime:new Date(this.props.data.dueTime),finalDate:t,isDue:!!t&&Date.now()>t,completed:this.props.data.completed})}},{key:"render",value:function(){var e=this;return Object(k.jsx)("div",{children:Object(k.jsxs)(H.a,{style:{padding:"8px 8px 0px 8px",wordBreak:"break-word",backgroundColor:this.props.data.todoColor?this.props.data.todoColor:"#FFFFFF",border:this.state.isDue?"2px solid red":"none",cursor:"pointer"},elevation:3,onClick:function(){return e.props.openTodoHandler(e.state.id)},children:[Object(k.jsx)("div",{className:this.state.completed?"strike":null,children:Object(k.jsx)("b",{children:this.state.title})}),this.state.finalDate&&Object(k.jsxs)(p.a,{variant:"caption",className:this.state.completed?"strike":null,style:{color:this.state.isDue?"red":"black"},children:["Due on ",this.getDueDate()," at ",this.getDueTime()]}),Object(k.jsx)("p",{className:this.state.completed?"strike":null,children:this.state.body}),Object(k.jsx)(I.a,{onClick:function(t){return e.props.deleteTodoHandler(t,e.state.id)},children:Object(k.jsx)(G.a,{id:this.state.id})})]})})}}]),n}(a.Component),V=n(184),Z=n(180),$=n(117),ee=n.n($),te=n(99),ne=n.n(te),ae=n(118),re=n.n(ae),oe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).toggleColorPicker=function(){e.setState((function(e){return{colorPickerState:!e.colorPickerState,dateTimePickerState:!1}}))},e.toggleDateTimePicker=function(){e.setState((function(e){return{dateTimePickerState:!e.dateTimePickerState,colorPickerState:!1}}))},e.changeHandler=function(t){e.setState(Object(F.a)({},t.target.name,t.target.value))},e.dateChangeHandler=function(t){e.setState((function(e){return{dueDate:t,dueTime:e.dueTime?e.dueTime:new Date(t.setHours(8,0,0,0))}}))},e.timeChangeHandler=function(t){e.setState((function(e){return{dueTime:t,dueDate:e.dueDate?e.dueDate:new Date(Date.now())}}))},e.getTime=function(){var t=(e.state.dueTime.getHours()%12<10?"0":"")+e.state.dueTime.getHours()%12,n=(e.state.dueTime.getMinutes()<10?"0":"")+e.state.dueTime.getMinutes(),a=e.state.dueTime.getHours()>=12?"PM":"AM";return"".concat(t,":").concat(n," ").concat(a)},e.selectColor=function(t){e.setState({todoColor:t})},e.clearDue=function(){e.setState({dueDate:null,dueTime:null})},e.handleTodoUpdate=function(){fetch("/todos/".concat(e.state.id,"/update"),{method:"put",headers:{"Content-Type":"application/json",accessToken:(new O.a).get("accessToken")},body:JSON.stringify(e.state)}).then(function(){var t=Object(x.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!=n.status){t.next=4;break}e.props.closeTodoHandler(!0),t.next=15;break;case 4:if(401!=n.status){t.next=11;break}return t.next=7,e.context.refresh();case 7:200==t.sent&&e.handleTodoUpdate(),t.next=15;break;case 11:return t.next=13,n.json().message;case 13:throw a=t.sent,new Error(a);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},e.handleTodoComplete=function(){e.setState((function(e){return{completed:!e.completed}}),(function(){fetch("/todos/".concat(e.state.id,"/complete"),{method:"put",headers:{"Content-Type":"application/json",accessToken:(new O.a).get("accessToken")},body:JSON.stringify({completed:e.state.completed})}).then(function(){var t=Object(x.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!=n.status){t.next=4;break}setTimeout((function(){e.props.closeTodoHandler(!0)}),750),t.next=9;break;case 4:if(401!=n.status){t.next=9;break}return t.next=7,e.context.refresh();case 7:200==t.sent&&e.handleTodoComplete();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},e.state={title:"",body:"",colorPickerState:!1,dateTimePickerState:!0,todoColor:"#FFFFFF",dueDate:null,dueTime:null,completed:null},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.loadTodoDetails()}},{key:"loadTodoDetails",value:function(){var e=this;fetch("/todos/".concat(this.props.todoId),{headers:{accessToken:(new O.a).get("accessToken")}}).then(function(){var t=Object(x.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!=n.status){t.next=7;break}return t.next=3,n.json();case 3:a=t.sent,e.setState({id:a._id,title:a.title,body:a.body,todoColor:a.todoColor,dueDate:a.dueDate?new Date(a.dueDate):null,dueTime:a.dueTime?new Date(a.dueTime):null,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt),completed:a.completed}),t.next=12;break;case 7:if(401!=n.status){t.next=12;break}return t.next=10,e.context.refresh();case 10:200==t.sent&&e.loadTodoDetails();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this;return this.state.title?Object(k.jsxs)(y.a,{container:!0,style:{backgroundColor:this.state.todoColor},direction:"column",children:[Object(k.jsxs)(y.a,{item:!0,container:!0,style:{flexWrap:"nowrap"},children:[Object(k.jsx)(y.a,{item:!0,sm:9,children:Object(k.jsx)(V.a,{children:Object(k.jsx)(P.a,{required:!0,inputProps:{style:{fontSize:"xx-large",fontWeight:"bolder"}},id:"filled-required",name:"title",fullWidth:!0,value:this.state.title,onChange:function(t){return e.changeHandler(t)}})})}),Object(k.jsx)(y.a,{item:!0,sm:3,children:Object(k.jsx)(I.a,{style:{float:"right"},onClick:function(){return e.props.closeTodoHandler(!1)},children:Object(k.jsx)(ee.a,{})})})]}),Object(k.jsx)(Z.a,{children:Object(k.jsxs)(y.a,{item:!0,container:!0,spacing:2,children:[Object(k.jsxs)(y.a,{item:!0,sm:6,children:[Object(k.jsx)(P.a,{name:"body",fullWidth:!0,multiline:!0,value:this.state.body,onChange:function(t){return e.changeHandler(t)}}),Object(k.jsx)(y.a,{item:!0,children:Object(k.jsxs)(p.a,{variant:"caption",children:[Object(k.jsx)(ne.a,{fontSize:"small",style:{transform:"translate(0px,3px)"}})," Created on ",this.state.createdAt.toLocaleString()]})}),Object(k.jsx)(y.a,{item:!0,children:Object(k.jsxs)(p.a,{variant:"caption",children:[Object(k.jsx)(ne.a,{fontSize:"small",style:{transform:"translate(0px,3px)"}})," Last Modified on ",this.state.updatedAt.toLocaleString()," "]})})]}),Object(k.jsxs)(y.a,{item:!0,sm:6,children:[Object(k.jsxs)(H.a,{elevation:3,style:{margin:"4px 0px"},children:[Object(k.jsx)(I.a,{onClick:function(){return e.toggleDateTimePicker()},children:Object(k.jsx)(M.a,{title:"Set Reminder","aria-label":"set reminder",children:Object(k.jsx)(A.a,{})})}),Object(k.jsx)(I.a,{onClick:function(){return e.toggleColorPicker()},children:Object(k.jsx)(M.a,{title:"Change Color","aria-label":"change color",children:Object(k.jsx)(J.a,{})})}),Object(k.jsx)(I.a,{onClick:function(t){return e.props.deleteTodoHandler(t,e.state.id)},children:Object(k.jsx)(M.a,{title:"Delete To-do","aria-label":"Delete To-do",children:Object(k.jsx)(G.a,{id:this.state.id})})}),this.state.dueDate&&Object(k.jsxs)(p.a,{variant:"body2",style:{margin:"4px 12px",backgroundColor:"#FFF",marginBottom:"12px"},children:["Due on ","".concat(this.state.dueDate.getMonth()+1,"/").concat(this.state.dueDate.getDate(),"/").concat(this.state.dueDate.getFullYear()," at ").concat(this.getTime())]}),Object(k.jsxs)(E.a,{in:this.state.dateTimePickerState||this.state.colorPickerState,timeout:"auto",unmountOnExit:!0,children:[this.state.dateTimePickerState?Object(k.jsx)(N.a,{utils:X.a,children:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(B.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",style:{backgroundColor:"#FFF",transform:"translateX(12px)",marginBottom:"12px"},id:"dueDate",label:"Due Date",value:this.state.dueDate,name:"dueDate",onChange:function(t){return e.dateChangeHandler(t)},KeyboardButtonProps:{"aria-label":"change date"}}),Object(k.jsx)(W.a,{style:{margin:"4px 0px",backgroundColor:"#FFF",transform:"translateX(12px)",marginBottom:"12px"},id:"dueTime",label:"Due Time",value:this.state.dueTime,onChange:function(t){return e.timeChangeHandler(t)},KeyboardButtonProps:{"aria-label":"change time"}}),this.state.dueDate&&Object(k.jsx)(j.a,{color:"secondary",style:{backgroundColor:"#FFF",transform:"translateX(12px)",marginBottom:"12px"},onClick:function(){return e.clearDue()},children:"Clear Due date and time"})]})}):null,Object(k.jsx)(L,{display:this.state.colorPickerState,selectColor:this.selectColor,selected:this.state.todoColor})]})]}),Object(k.jsx)(j.a,{variant:"contained",color:"primary",type:"submit",style:{margin:"4px",float:"right"},onClick:function(){return e.handleTodoUpdate()},children:"Update"}),Object(k.jsx)(j.a,{variant:this.state.completed?"outlined":"contained",color:"secondary",type:"submit",style:{margin:"4px",float:"right"},onClick:function(){return e.handleTodoComplete()},startIcon:this.state.completed?Object(k.jsx)(re.a,{}):null,children:this.state.completed?"Done":"Mark As done"})]})]})})]}):null}}]),n}(a.Component);oe.contextType=w;var se=oe,ie=n.p+"static/media/emptylist.053c556a.png",ce=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).deleteTodoHandler=function(t,n){t.stopPropagation(),fetch("/todos/".concat(n),{method:"delete",headers:{accessToken:(new O.a).get("accessToken")}}).then(function(){var a=Object(x.a)(f.a.mark((function a(r){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(200!==r.status){a.next=4;break}e.closeTodoHandler(!0),a.next=8;break;case 4:return a.next=6,e.context.refresh();case 6:200==a.sent&&e.deleteTodoHandler(t,n);case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},e.openTodoHandler=function(t){return e.setState({openTodo:!0,openTodoId:t})},e.closeTodoHandler=function(t){e.setState({openTodo:!1},(function(){t&&e.props.fetchTodos()}))},e.state={openTodo:!1,openTodoId:null},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return this.props.todos.length>0?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(K.a,{breakpointCols:{default:4,1100:3,700:2,400:1},className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:this.props.todos.map((function(t){return Object(k.jsx)(Q,{data:t,deleteTodoHandler:e.deleteTodoHandler,openTodoHandler:e.openTodoHandler},t._id)}))}),Object(k.jsx)(q.a,{open:this.state.openTodo,fullWidth:!0,maxWidth:"sm",children:Object(k.jsx)(se,{closeTodoHandler:this.closeTodoHandler,todoId:this.state.openTodoId,deleteTodoHandler:this.deleteTodoHandler})})]}):Object(k.jsxs)(y.a,{container:!0,justify:"center",alignItems:"center",direction:"column",style:{height:"100%"},children:[Object(k.jsx)(y.a,{item:!0,children:Object(k.jsx)("img",{src:ie,width:100})}),Object(k.jsx)(y.a,{item:!0,children:Object(k.jsx)(p.a,{variant:"h4",children:"No To-dos"})})]})}}]),n}(a.Component);ce.contextType=w;var le=ce,de=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).fetchTodos=Object(x.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/todos",{headers:{accessToken:(new O.a).get("accessToken")}}).then(function(){var t=Object(x.a)(f.a.mark((function t(n){var a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!=n.status){t.next=7;break}return t.next=3,n.json();case 3:a=t.sent,e._isMounted&&e.setState({todos:a}),t.next=18;break;case 7:if(401!=n.status){t.next=14;break}return t.next=10,e.context.refresh();case 10:200==t.sent&&e.fetchTodos(),t.next=18;break;case 14:return t.next=16,n.json();case 16:throw r=t.sent,new Error(r.message);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)}))),e.submitHandler=function(t){fetch("/todos",{method:"post",headers:{"Content-Type":"application/json",accessToken:(new O.a).get("accessToken")},body:JSON.stringify(t)}).then(function(){var n=Object(x.a)(f.a.mark((function n(a){var r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(200!=a.status){n.next=5;break}e.setState({newTodoError:null}),e.fetchTodos(),n.next=17;break;case 5:if(401!=a.status){n.next=12;break}return n.next=8,e.context.refresh();case 8:200==n.sent&&e.submitHandler(t),n.next=17;break;case 12:return n.next=14,a.json();case 14:throw r=n.sent,e.setState({newTodoError:r.message}),new Error(r.message);case 17:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},e.state={todos:[],isSignedIn:!!(new O.a).get("accessToken"),newTodoError:null},e._isMounted=!1,e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._isMounted&&this.fetchTodos()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return Object(k.jsx)(C,{children:function(t){return t.isSignedIn?Object(k.jsxs)(y.a,{container:!0,spacing:0,children:[Object(k.jsx)(v.a,{clone:!0,order:{xs:0,md:0},children:Object(k.jsx)(y.a,{item:!0,sm:!1,lg:1})}),Object(k.jsx)(v.a,{clone:!0,order:{xs:2,md:1},children:Object(k.jsx)(y.a,{item:!0,className:"todoContainer",container:!0,xs:12,sm:12,md:8,lg:7,direction:"row",justify:"flex-start","align-items":"flex-start",style:{border:"0px solid",padding:"12px",height:"fit-content"},children:Object(k.jsx)(le,{todos:e.state.todos,fetchTodos:e.fetchTodos})})}),Object(k.jsx)(v.a,{clone:!0,order:{xs:1,md:2},children:Object(k.jsx)(y.a,{item:!0,container:!0,xs:12,md:4,lg:3,style:{border:"0px solid",padding:"12px",height:"fit-content"},children:Object(k.jsx)(Y,{submitHandler:e.submitHandler,newTodoError:e.state.newTodoError})})}),Object(k.jsx)(v.a,{clone:!0,order:{xs:3,md:3},children:Object(k.jsx)(y.a,{item:!0,sm:!1,lg:1})})]}):Object(k.jsx)(b.a,{to:"/signin"})}})}}]),n}(a.Component);de.contextType=w;var ue=de,he=n(182),pe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;return Object(i.a)(this,n),(r=t.call(this,e,a)).changeHandler=function(e){r.setState(Object(F.a)({},e.target.name,e.target.value))},r.state={username:"",password:""},r}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(k.jsx)(C,{children:function(t){return t.isSignedIn?Object(k.jsx)(b.a,{to:"/"}):Object(k.jsx)(y.a,{container:!0,item:!0,xs:12,justify:"center",alignItems:"center",style:{height:"100vh"},children:Object(k.jsxs)(H.a,{style:{padding:"16px",width:"75vh"},elevation:3,children:[Object(k.jsx)(p.a,{variant:"h3",children:"Sign In"}),t.signInError&&Object(k.jsx)(z.a,{severity:"error",variant:"outlined",style:{margin:"12px 0px"},children:t.signInError}),Object(k.jsxs)("form",{method:"post",action:"/auth/signin",onSubmit:function(n){n.preventDefault(),t.signin(e.state.username,e.state.password)},children:[Object(k.jsx)(P.a,{name:"username",label:"Username",variant:"outlined",fullWidth:!0,style:{margin:"4px 0px"},className:"customInput",onChange:function(t){return e.changeHandler(t)}}),Object(k.jsx)(P.a,{name:"password",label:"Password",type:"password",variant:"outlined",fullWidth:!0,className:"customInput",style:{margin:"4px 0px"},onChange:function(t){return e.changeHandler(t)}}),Object(k.jsx)(j.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,style:{margin:"4px 0px"},endIcon:t.signinInProgress&&Object(k.jsx)(he.a,{style:{color:"#FFFFFF"},size:20}),children:"sign in"}),Object(k.jsxs)(p.a,{variant:"h6",children:["Need an account? ",Object(k.jsx)(m.b,{to:"/signup",children:"Sign Up"})]})]})]})})}})}}]),n}(a.Component),je=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).changeHandler=function(t){e.setState(Object(F.a)({},t.target.name,t.target.value))},e.submitHandler=function(t){t.preventDefault(),fetch("/auth/signup",{method:"post",body:JSON.stringify({username:e.state.username,password:e.state.password,name:e.state.name}),headers:{"Content-Type":"application/json"}}).then(function(){var t=Object(x.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:a=t.sent,200==n.status?e.setState({isSignedIn:!0},(function(){e.props.updateState()})):e.setState({message:a.message,isSignedIn:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.state={username:"",password:"",name:"",isSignedIn:!1,message:null},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(k.jsx)(C,{children:function(t){return t.isSignedIn?Object(k.jsx)(b.a,{to:"/"}):Object(k.jsx)(y.a,{item:!0,container:!0,xs:12,justify:"center",alignItems:"center",style:{height:"100vh"},children:Object(k.jsxs)(H.a,{style:{padding:"16px",width:"75vh"},elevation:3,children:[Object(k.jsx)(p.a,{variant:"h3",children:"Sign Up"}),t.signUpError&&Object(k.jsx)(z.a,{severity:"error",variant:"outlined",style:{margin:"12px 0px"},children:t.signUpError}),Object(k.jsxs)("form",{method:"post",action:"/auth/signup",onSubmit:function(n){n.preventDefault(),t.signup(e.state.name,e.state.username,e.state.password)},children:[Object(k.jsx)(P.a,{name:"name",label:"Name",variant:"outlined",fullWidth:!0,style:{margin:"4px 0px"},onChange:function(t){return e.changeHandler(t)}}),Object(k.jsx)(P.a,{name:"username",label:"Username",variant:"outlined",fullWidth:!0,style:{margin:"4px 0px",display:"block"},onChange:function(t){return e.changeHandler(t)}}),Object(k.jsx)(P.a,{name:"password",label:"Password",type:"password",variant:"outlined",fullWidth:!0,style:{margin:"4px 0px",display:"block"},onChange:function(t){return e.changeHandler(t)}}),Object(k.jsx)(j.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,style:{margin:"4px 0px"},endIcon:t.signupInProgress&&Object(k.jsx)(he.a,{style:{color:"#FFFFFF"},size:20}),children:"sign up"}),Object(k.jsxs)(p.a,{variant:"h6",children:["Have an account? ",Object(k.jsx)(m.b,{to:"/signin",children:"Sign In"})]})]})]})})}})}}]),n}(a.Component),me=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).state={isSignedIn:!1,loaded:!1},e}return Object(c.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsxs)(S,{children:[Object(k.jsx)(u.a,{position:"static",children:Object(k.jsxs)(h.a,{children:[Object(k.jsx)(p.a,{variant:"h6",style:{flex:1},children:"To-Doer"}),Object(k.jsx)(C,{children:function(e){return Object(k.jsx)(m.a,{children:Object(k.jsx)(m.b,{to:"/signin",children:Object(k.jsx)(j.a,{style:{color:"white",textDecoration:"none"},onClick:function(){return e.signout()},children:e.isSignedIn?"Logout":"Login"})})})}})]})}),Object(k.jsx)(m.a,{children:Object(k.jsxs)(b.d,{children:[Object(k.jsx)(b.b,{path:"/",exact:!0,component:ue}),Object(k.jsx)(b.b,{path:"/signin",exact:!0,component:pe}),Object(k.jsx)(b.b,{path:"/signup",exact:!0,component:je})]})})]})})}}]),n}(r.a.Component),be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,194)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),o(e),s(e)}))};s.a.render(Object(k.jsx)(me,{}),document.getElementById("root")),be()}},[[149,1,2]]]);
//# sourceMappingURL=main.c88ab47f.chunk.js.map